########################
# application.properties – Configuración global para producción
########################

# Nombre de la aplicación, usado en logs y discovery
spring.application.name=mlsuite-backend

# Perfil activo (entorno de ejecución)
spring.profiles.active=prod

########################
# SQL
########################

# Deshabilita ejecución de scripts SQL explícitos en prod
spring.sql.init.mode=never

########################
# Logging / SQL
########################

# Nivel de logging para sentencias SQL de Hibernate
logging.level.org.hibernate.SQL=debug

# Ruta y nombre de fichero de logs
logging.file.name=${LOG_PATH:/var/log}/mlsuite-backend.log

# Formato de salida por consola
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Formato de salida en fichero
logging.pattern.file=%d{ISO8601} [%thread] %-5level %logger{36} - %msg%n

########################
# Data Source / HikariCP
########################

# Driver JDBC para PostgreSQL
spring.datasource.driver-class-name=org.postgresql.Driver

# URL de conexión, con variables de entorno para host, puerto y base de datos
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_PROD}

# Credenciales de base de datos
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASS}

# Pool de conexiones HikariCP – tamaño máximo de conexiones activas
spring.datasource.hikari.maximum-pool-size=10

# Pool de conexiones HikariCP – número mínimo de conexiones inactivas
spring.datasource.hikari.minimum-idle=2

# Pool de conexiones HikariCP – tiempo máximo de inactividad antes de cerrar conexión (ms)
spring.datasource.hikari.idle-timeout=300000

# Pool de conexiones HikariCP – tiempo de espera para obtener conexión (ms)
spring.datasource.hikari.connection-timeout=30000

# Pool de conexiones HikariCP – vida máxima de una conexión antes de renovarla (ms)
spring.datasource.hikari.max-lifetime=1800000

# Pool de conexiones HikariCP – tiempo de validación de conexiones (ms)
spring.datasource.hikari.validation-timeout=5000

# Pool de conexiones HikariCP – detección de fugas de conexión (ms)
spring.datasource.hikari.leak-detection-threshold=120000

# SQL de inicialización de conexión, útil para validar antes de usar
spring.datasource.hikari.connection-init-sql=SELECT 1

########################
# JPA / Hibernate
########################

# Política de validación de esquema (validate|update|create|create-drop)
spring.jpa.hibernate.ddl-auto=update

# Mostrar o no SQL en logs
spring.jpa.show-sql=false

# Deshabilitar formato de SQL en logs
spring.jpa.properties.hibernate.format_sql=false

# Deshabilitar comentarios SQL en logs
spring.jpa.properties.hibernate.use_sql_comments=false

# Zona horaria JDBC para evitar discrepancias de fecha/hora
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

########################
# Transacciones
########################

# Tiempo de espera por defecto para transacciones
spring.transaction.default-timeout=30s

# Habilitar rollback si la confirmación falla
spring.transaction.rollback-on-commit-failure=true